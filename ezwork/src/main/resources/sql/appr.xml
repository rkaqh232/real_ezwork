<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 영민 결재  -->

<mapper namespace="Apprs">
	<select id="getlist" parameterType="java.util.Map" resultType="appr">
		select * from
		(select rownum rnum, b.*
		from
		(select * from
		approve
		order by APPR_CODE desc) b
		)
		where rnum
		&gt;=#{start} and rnum &lt;= #{end}
	</select>
	
	<select id="count" resultType="int">
		select count(*) from approve
	</select>
	
	<insert id="insertappr" parameterType="appr" >
		insert into approve
		(APPR_CODE, M_CODE, M_PART, APPR_TITLE, APPR_CONTENT, FIRST_CODE, M_PART_F, SECOND_CODE, M_PART_S,
		 THIRD_CODE, M_PART_T, APPR_FILE, APPR_ORIGIN, APPR_STAT, APPR_DATE, APPR_COMP_DATE, APPR_VAL
		 )	
		 appr_seq.nextval, #{M_CODE}, #{M_PART}, #{APPR_TITLE}, #{APPR_CONTENT}, #{FIRST_CODE}, #{M_PART_f},
		 #{SECOND_CODE}, #{M_PART_S}, #{THIRD_CODE}, #{M_PART_T}, #{APPR_FILE, jdbcType=VARCHAR},
		 #{APPR_ORIGIN, jdbcType=VARCHAR}, #{APPR_STAT}, systdate, #{APPR_COMP_DATE}, 0
	
	
	</insert>
	
	
	<select id="getname" parameterType="String" resultType="String">
		select M_NAME
		from member
		where M_CODE = #{m_code}
	</select>
	
	<select id="getpart" parameterType="String" resultType="String">
		select M_PART_C
		from member
		where M_CODE = #{m_code}
	</select>
	
	<select id="getmemList" resultType="member" parameterType="String">
		select *
		from member
		where m_code != 'admin' AND 
		( m_part_c like #{keyword} OR m_name like #{keyword}  )
		order by m_part_c asc, m_level asc 
	</select>
	
	<select id="getmemcount" resultType="int">
		select count(*) from member
		where m_code != 'admin'
	</select>
	
	
	
</mapper>